<div class="min-h-screen bg-neutral-950 flex items-center justify-center px-4 py-16">

  <!-- Background glows -->
  <div class="absolute inset-0 pointer-events-none overflow-hidden">
    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[400px] bg-red-900/20 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 right-0 w-[400px] h-[400px] bg-orange-900/15 rounded-full blur-3xl"></div>
  </div>

  <div class="relative w-full max-w-md">

    <!-- Logo -->
    <div class="text-center mb-8">
      <a routerLink="/" class="inline-flex items-center gap-2.5 group">
        <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center shadow-lg">
          <svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 4a1 1 0 0 1 1-1h12a1 1 0 0 1 .894.553L19.382 7H21a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-1.17A3 3 0 0 1 14 17H10a3 3 0 0 1-5.83-2H4a1 1 0 0 1-1-1V4zm14.382 3-1.5-3H5v9h.17A3 3 0 0 1 10 11h4a3 3 0 0 1 4.83 2H21V9h-2a1 1 0 0 1-.894-.553L17.382 7zM8 15a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm6 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
          </svg>
        </div>
        <span class="text-2xl font-bold text-white tracking-tight">
          Fretes<span class="text-brand-green">JA</span>
        </span>
      </a>
    </div>

    <!-- Card -->
    <div class="bg-white/5 border border-white/10 backdrop-blur-sm rounded-2xl p-8">

      @if (success()) {
        <!-- Estado de sucesso -->
        <div class="text-center py-4">
          <div class="w-16 h-16 rounded-full bg-green-500/10 border border-green-500/20 flex items-center justify-center mx-auto mb-5">
            <svg class="w-8 h-8 text-green-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6 9 17l-5-5"/>
            </svg>
          </div>
          <h1 class="text-xl font-semibold text-white mb-3">E-mail enviado!</h1>
          <p class="text-neutral-400 text-sm leading-relaxed mb-6">
            Se esse e-mail estiver cadastrado, você receberá as instruções para redefinir sua senha em instantes.
            Verifique também sua caixa de spam.
          </p>
          <a routerLink="/login" hlmBtn class="w-full font-semibold">
            Voltar ao login
          </a>
        </div>

      } @else {
        <!-- Formulário -->
        <div class="mb-6">
          <h1 class="text-xl font-semibold text-white mb-2">Esqueci minha senha</h1>
          <p class="text-neutral-400 text-sm">
            Informe seu e-mail e enviaremos um link para redefinir sua senha.
          </p>
        </div>

        <!-- Erro -->
        @if (errorMessage()) {
          <div class="flex items-center gap-3 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 mb-6">
            <svg class="w-4 h-4 text-red-400 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/>
            </svg>
            <p class="text-red-400 text-sm">{{ errorMessage() }}</p>
          </div>
        }

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-5">

          <div>
            <label class="block text-sm font-medium text-neutral-300 mb-1.5" for="email">E-mail</label>
            <input
              hlmInput
              id="email"
              type="email"
              placeholder="seu@email.com"
              formControlName="email"
              class="w-full bg-white/5 border-white/15 text-white placeholder:text-neutral-500 focus:border-primary"
              autocomplete="email"
            />
            @if (isInvalid('email')) {
              <p class="text-red-400 text-xs mt-1.5">Informe um e-mail válido.</p>
            }
          </div>

          <button hlmBtn type="submit" size="lg" class="w-full font-semibold mt-1" [disabled]="loading()">
            @if (loading()) {
              <svg class="w-4 h-4 animate-spin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
              </svg>
              Enviando...
            } @else {
              Enviar link de recuperação
            }
          </button>

        </form>
      }

    </div>

    <!-- Link de voltar -->
    @if (!success()) {
      <div class="mt-6 text-center">
        <a routerLink="/login" class="text-neutral-500 hover:text-neutral-300 text-sm transition-colors inline-flex items-center gap-1.5">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m15 18-6-6 6-6"/>
          </svg>
          Voltar ao login
        </a>
      </div>
    }

  </div>
</div>
